{"componentChunkName":"component---node-modules-gatsby-theme-blog-core-src-templates-post-query-js","path":"/javascript-scopes-and-closures/","result":{"data":{"site":{"siteMetadata":{"title":"WeAreOutMan","social":[{"name":"github","url":"https://github.com/weareoutman"},{"name":"GitHub","url":"https://github.com/gatsbyjs"}]}},"blogPost":{"__typename":"MdxBlogPost","id":"b851b588-fc1b-5dad-9e44-cf57e54d58d0","excerpt":"作用域的嵌套将形成 作用域链 ，函数的嵌套将形成 闭包 。闭包与作用域链是 JavaScript 区别于其它语言的重要特性之一。 作用域 JavaScript…","body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"JavaScript 作用域和闭包\",\n  \"date\": \"2014-03-24T00:00:00.000Z\"\n};\n\nvar makeShortcode = function makeShortcode(name) {\n  return function MDXDefaultShortcode(props) {\n    console.warn(\"Component '\" + name + \"' was not imported, exported, or provided by MDXProvider as global scope\");\n    return mdx(\"div\", props);\n  };\n};\n\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"\\u4F5C\\u7528\\u57DF\\u7684\\u5D4C\\u5957\\u5C06\\u5F62\\u6210\", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"\\u4F5C\\u7528\\u57DF\\u94FE\"), \"\\uFF0C\\u51FD\\u6570\\u7684\\u5D4C\\u5957\\u5C06\\u5F62\\u6210\", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"\\u95ED\\u5305\"), \"\\u3002\\u95ED\\u5305\\u4E0E\\u4F5C\\u7528\\u57DF\\u94FE\\u662F JavaScript \\u533A\\u522B\\u4E8E\\u5176\\u5B83\\u8BED\\u8A00\\u7684\\u91CD\\u8981\\u7279\\u6027\\u4E4B\\u4E00\\u3002\"), mdx(\"h3\", {\n    \"id\": \"作用域\"\n  }, \"\\u4F5C\\u7528\\u57DF\"), mdx(\"p\", null, \"JavaScript \\u4E2D\\u6709\\u4E24\\u79CD\\u4F5C\\u7528\\u57DF\\uFF1A\\u51FD\\u6570\\u4F5C\\u7528\\u57DF\\u548C\\u5168\\u5C40\\u4F5C\\u7528\\u57DF\\u3002\"), mdx(\"p\", null, \"\\u5728\\u4E00\\u4E2A\\u51FD\\u6570\\u4E2D\\u58F0\\u660E\\u7684\\u53D8\\u91CF\\u4EE5\\u53CA\\u8BE5\\u51FD\\u6570\\u7684\\u53C2\\u6570\\u4EAB\\u6709\\u540C\\u4E00\\u4E2A\\u4F5C\\u7528\\u57DF\\uFF0C\\u5373\\u51FD\\u6570\\u4F5C\\u7528\\u57DF\\u3002\\u4E00\\u4E2A\\u7B80\\u5355\\u7684\\u51FD\\u6570\\u4F5C\\u7528\\u57DF\\u7684\\u4F8B\\u5B50\\uFF1A\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-javascript\"\n  }), \"function foo() {\\n    var bar = 1;\\n    {\\n        var bar = 2;\\n    }\\n    return bar; // 2\\n}\\n\")), mdx(\"p\", null, \"\\u4E0D\\u540C\\u4E8EC\\u7B49\\u5176\\u5B83\\u6709\", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"\\u5757\\u4F5C\\u7528\\u57DF\"), \"\\u7684\\u8BED\\u8A00\\uFF0C\\u8FD9\\u91CC\\u5C06\\u59CB\\u7EC8\\u8FD4\\u56DE \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"2\"), \" \\u3002\"), mdx(\"p\", null, \"\\u5168\\u5C40\\u4F5C\\u7528\\u57DF\\uFF0C\\u5BF9\\u4E8E\\u6D4F\\u89C8\\u5668\\u6765\\u8BF4\\u53EF\\u4EE5\\u7406\\u89E3\\u4E3A \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"window\"), \" \\u5BF9\\u8C61\\uFF08Node.js\\u5219\\u662F \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"global\"), \"\\uFF09\\uFF1A\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-javascript\"\n  }), \"var bar = 1;\\nfunction foo() {}\\nalert(window.bar); // 1\\nalert(window.foo); // \\\"function foo() {}\\\"\\n\")), mdx(\"p\", null, \"\\u5BF9\\u4E8E\\u53D8\\u91CF \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"bar\"), \" \\u548C\\u51FD\\u6570 \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"foo\"), \" \\u90FD\\u5C5E\\u4E8E\\u5168\\u5C40\\u4F5C\\u7528\\u57DF\\uFF0C\\u90FD\\u662F \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"window\"), \" \\u7684\\u4E00\\u4E2A\\u5C5E\\u6027\\u3002\"), mdx(\"h3\", {\n    \"id\": \"作用域链\"\n  }, \"\\u4F5C\\u7528\\u57DF\\u94FE\"), mdx(\"p\", null, \"\\u5728 JavaScript \\u4E2D\\u8BBF\\u95EE\\u4E00\\u4E2A\\u53D8\\u91CF\\u65F6\\uFF0C\\u5C06\\u4ECE\\u672C\\u5730\\u53D8\\u91CF\\u548C\\u53C2\\u6570\\u5F00\\u59CB\\uFF0C\\u9010\\u7EA7\\u5411\\u4E0A\\u904D\\u5386\\u4F5C\\u7528\\u57DF\\u76F4\\u5230\\u5168\\u5C40\\u4F5C\\u7528\\u57DF\\u3002\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-javascript\"\n  }), \"var scope = 0, zero = \\\"global-scope\\\";\\n(function(){\\n    var scope = 1, one = \\\"scope-1\\\";\\n    (function(){\\n        var scope = 2, two = \\\"scope-2\\\";\\n        (function(){\\n            var scope = 3, three = \\\"scope-3\\\";\\n            // scope-3 scope-2 scope-1 global-scope\\n            console.log([three, two, one, zero].join(\\\" \\\"));\\n            console.log(scope); // 3\\n        })();\\n        console.log(typeof three); // undefined\\n        console.log(scope); // 2\\n    })();\\n    console.log(typeof two); // undefined\\n    console.log(scope); // 1\\n})();\\nconsole.log(typeof one); // undefined\\nconsole.log(scope); // 0\\n\")), mdx(\"p\", null, \"\\u5728\\u6700\\u91CC\\u5C42\\u7684\\u51FD\\u6570\\u4E2D\\uFF0C\\u5404\\u4E2A\\u53D8\\u91CF\\u90FD\\u80FD\\u88AB\\u9010\\u7EA7\\u904D\\u5386\\u5E76\\u8F93\\u51FA\\u3002\\u800C\\u5012\\u6570\\u7B2C\\u4E8C\\u5C42\\u7684\\u51FD\\u6570\\u4E2D\\uFF0C\\u53D8\\u91CF \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"three\"), \" \\u65E0\\u6CD5\\u904D\\u5386\\u627E\\u5230\\uFF0C\\u6240\\u4EE5\\u8F93\\u51FA\\u4E86 \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"undefined\"), \" \\u3002\"), mdx(\"p\", null, \"\\u4E3E\\u4E00\\u4E2A\\u901A\\u4FD7\\u70B9\\u7684\\u4F8B\\u5B50\\uFF0C\\u4F60\\u51C6\\u5907\\u8981\\u82B1\\u94B1\\u4E70\\u70B9\\u4E1C\\u897F\\u65F6\\uFF0C\\u4F1A\\u5148\\u6478\\u6478\\u81EA\\u5DF1\\u7684\\u94B1\\u5305\\uFF0C\\u6CA1\\u4E86\\u4F60\\u53EF\\u4EE5\\u627E\\u4F60\\u7238\\u8981\\uFF0C\\u4F60\\u7238\\u4E5F\\u6CA1\\u6709\\u5C31\\u518D\\u627E\\u4F60\\u7237\\u7237\\uFF0C\\u2026 \\u3002\\u800C\\u4F60\\u7238\\u6CA1\\u94B1\\u4E70\\u4E1C\\u897F\\u65F6\\uFF0C\\u4ED6\\u5E76\\u4E0D\\u4F1A\\u6765\\u627E\\u4F60\\u8981\\u3002\"), mdx(\"h3\", {\n    \"id\": \"闭包\"\n  }, \"\\u95ED\\u5305\"), mdx(\"p\", null, \"\\u5728\\u4E00\\u4E2A\\u51FD\\u6570\\u4E2D\\uFF0C\\u5B9A\\u4E49\\u53E6\\u4E00\\u4E2A\\u51FD\\u6570\\uFF0C\\u79F0\\u4E3A\\u51FD\\u6570\\u5D4C\\u5957\\u3002\\u51FD\\u6570\\u7684\\u5D4C\\u5957\\u5C06\\u5F62\\u6210\\u4E00\\u4E2A\", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"\\u95ED\\u5305\"), \"\\u3002\"), mdx(\"p\", null, \"\\u95ED\\u5305\\u4E0E\\u4F5C\\u7528\\u57DF\\u94FE\\u76F8\\u8F85\\u76F8\\u6210\\uFF0C\\u51FD\\u6570\\u7684\\u5D4C\\u5957\\u5728\\u4EA7\\u751F\\u4E86\\u94FE\\u5F0F\\u5173\\u7CFB\\u7684\\u591A\\u4E2A\\u4F5C\\u7528\\u57DF\\u7684\\u540C\\u65F6\\uFF0C\\u4E5F\\u5F62\\u6210\\u4E86\\u4E00\\u4E2A\\u95ED\\u5305\\u3002\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-javascript\"\n  }), \"function bind(func, target) {\\n    return function() {\\n        func.apply(target, arguments);\\n    };\\n}\\n\")), mdx(\"p\", null, \"\\u90A3\\u4E48\\u600E\\u4E48\\u7406\\u89E3\\u95ED\\u5305\\u5462\\uFF1F\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"\\u5916\\u90E8\\u51FD\\u6570\\u4E0D\\u80FD\\u8BBF\\u95EE\\u5185\\u5D4C\\u51FD\\u6570\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"\\u5916\\u90E8\\u51FD\\u6570\\u4E5F\\u4E0D\\u80FD\\u8BBF\\u95EE\\u5185\\u5D4C\\u51FD\\u6570\\u7684\\u53C2\\u6570\\u548C\\u53D8\\u91CF\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"\\u800C\\u5185\\u5D4C\\u51FD\\u6570\\u53EF\\u4EE5\\u8BBF\\u95EE\\u5916\\u90E8\\u51FD\\u6570\\u7684\\u53C2\\u6570\\u548C\\u53D8\\u91CF\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"\\u6362\\u4E00\\u4E2A\\u8BF4\\u6CD5\\uFF1A\\u5185\\u5D4C\\u51FD\\u6570\\u5305\\u542B\\u4E86\\u5916\\u90E8\\u51FD\\u6570\\u7684\\u4F5C\\u7528\\u57DF\")), mdx(\"p\", null, \"\\u6211\\u4EEC\\u518D\\u770B\\u770B\\u4E4B\\u524D\\u8BB2\\u8FF0\\u7684\\u4F5C\\u7528\\u57DF\\u94FE\\u7684\\u4F8B\\u5B50\\uFF0C\\u8FD9\\u6B21\\u4ECE\\u95ED\\u5305\\u7684\\u89D2\\u5EA6\\u6765\\u7406\\u89E3\\u4E0B\\uFF1A\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-javascript\"\n  }), \"var scope = 0, zero = \\\"global-scope\\\";\\n(function(){\\n    var scope = 1, one = \\\"scope-1\\\";\\n    (function(){\\n        var scope = 2, two = \\\"scope-2\\\";\\n        (function(){\\n            var scope = 3, three = \\\"scope-3\\\";\\n            // scope-3 scope-2 scope-1 global-scope\\n            console.log([three, two, one, zero].join(\\\" \\\"));\\n            console.log(scope); // 3\\n        })();\\n        console.log(typeof three); // undefined\\n        console.log(scope); // 2\\n    })();\\n    console.log(typeof two); // undefined\\n    console.log(scope); // 1\\n})();\\nconsole.log(typeof one); // undefined\\nconsole.log(scope); // 0\\n\")), mdx(\"p\", null, \"\\u6700\\u91CC\\u5C42\\u7684\\u51FD\\u6570\\u80FD\\u8BBF\\u95EE\\u5230\\u5176\\u5185\\u90E8\\u548C\\u5916\\u90E8\\u5B9A\\u4E49\\u7684\\u6240\\u6709\\u53D8\\u91CF\\u3002\\u800C\\u5012\\u6570\\u7B2C\\u4E8C\\u5C42\\u7684\\u51FD\\u6570\\u65E0\\u6CD5\\u8BBF\\u95EE\\u5230\\u6700\\u91CC\\u5C42\\u7684\\u53D8\\u91CF\\uFF0C\\u540C\\u65F6\\uFF0C\\u6700\\u91CC\\u5C42\\u7684 \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"scope = 3\"), \" \\u8FD9\\u4E2A\\u8D4B\\u503C\\u64CD\\u4F5C\\u5E76\\u6CA1\\u6709\\u5BF9\\u5176\\u5916\\u90E8\\u7684\\u540C\\u540D\\u53D8\\u91CF\\u4EA7\\u751F\\u5F71\\u54CD\\u3002\"), mdx(\"p\", null, \"\\u518D\\u6362\\u4E2A\\u89D2\\u5EA6\\u6765\\u7406\\u89E3\\u95ED\\u5305\\uFF1A\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"\\u6BCF\\u6B21\\u5916\\u90E8\\u51FD\\u6570\\u7684\\u8C03\\u7528\\uFF0C\\u5185\\u5D4C\\u51FD\\u6570\\u90FD\\u4F1A\\u88AB\\u521B\\u5EFA\\u4E00\\u6B21\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"\\u5728\\u5B83\\u88AB\\u521B\\u5EFA\\u65F6\\uFF0C\\u5916\\u90E8\\u51FD\\u6570\\u7684\\u4F5C\\u7528\\u57DF\\uFF08\\u5305\\u62EC\\u4EFB\\u4F55\\u672C\\u5730\\u53D8\\u91CF\\u3001\\u53C2\\u6570\\u7B49\\u4E0A\\u4E0B\\u6587\\uFF09\\uFF0C\\n\\u4F1A\\u6210\\u4E3A\\u6BCF\\u4E2A\\u5185\\u5D4C\\u51FD\\u6570\\u5BF9\\u8C61\\u7684\\u5185\\u90E8\\u72B6\\u6001\\u7684\\u4E00\\u90E8\\u5206\\uFF0C\\u5373\\u4F7F\\u5728\\u5916\\u90E8\\u51FD\\u6570\\u6267\\u884C\\u5B8C\\u5E76\\u9000\\u51FA\\u540E\")), mdx(\"p\", null, \"\\u770B\\u4E0B\\u9762\\u7684\\u4F8B\\u5B50\\uFF1A\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-javascript\"\n  }), \"var i, list = [];\\nfor (i = 0; i < 2; i += 1) {\\n    list.push(function(){\\n        console.log(i);\\n    });\\n}\\nlist.forEach(function(func){\\n  func();\\n});\\n\")), mdx(\"p\", null, \"\\u6211\\u4EEC\\u5C06\\u5F97\\u5230\\u4E24\\u6B21 \\u201C2\\u201D \\uFF0C\\u800C\\u4E0D\\u662F\\u9884\\u671F\\u7684 \\u201C1\\u201D \\u548C \\u201C2\\u201D \\uFF0C\\u8FD9\\u662F\\u56E0\\u4E3A\\u5728 \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"list\"), \" \\u4E2D\\u7684\\u4E24\\u4E2A\\u51FD\\u6570\\u8BBF\\u95EE\\u7684\\u53D8\\u91CF \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"i\"), \" \\u90FD\\u662F\\u5176\\u4E0A\\u4E00\\u5C42\\u4F5C\\u7528\\u57DF\\u7684\\u540C\\u4E00\\u4E2A\\u53D8\\u91CF\\u3002\"), mdx(\"p\", null, \"\\u6211\\u4EEC\\u6539\\u52A8\\u4E0B\\u4EE3\\u7801\\uFF0C\\u4EE5\\u5229\\u7528\\u95ED\\u5305\\u6765\\u89E3\\u51B3\\u8FD9\\u4E2A\\u95EE\\u9898\\uFF1A\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-javascript\"\n  }), \"var i, list = [];\\nfor (i = 0; i < 2; i += 1) {\\n    list.push((function(j){\\n        return function(){\\n            console.log(j);\\n        };\\n    })(i));\\n}\\nlist.forEach(function(func){\\n  func();\\n});\\n\")), mdx(\"p\", null, \"\\u5916\\u5C42\\u7684\\u201C\\u7ACB\\u5373\\u6267\\u884C\\u51FD\\u6570\\u201D\\u63A5\\u6536\\u4E86\\u4E00\\u4E2A\\u53C2\\u6570\\u53D8\\u91CF \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"i\"), \" \\uFF0C\\u5728\\u5176\\u51FD\\u6570\\u5185\\u4EE5\\u53C2\\u6570 \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"j\"), \" \\u7684\\u5F62\\u5F0F\\u5B58\\u5728\\uFF0C\\u5B83\\u4E0E\\u88AB\\u8FD4\\u56DE\\u7684\\u5185\\u5C42\\u51FD\\u6570\\u4E2D\\u7684\\u540D\\u79F0 \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"j\"), \" \\u6307\\u5411\\u540C\\u4E00\\u4E2A\\u5F15\\u7528\\u3002\\u5916\\u5C42\\u51FD\\u6570\\u6267\\u884C\\u5E76\\u9000\\u51FA\\u540E\\uFF0C\\u53C2\\u6570 \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"j\"), \" \\uFF08\\u6B64\\u65F6\\u5B83\\u7684\\u503C\\u4E3A \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"i\"), \" \\u7684\\u5F53\\u524D\\u503C\\uFF09\\u6210\\u4E3A\\u4E86\\u5176\\u5185\\u5C42\\u51FD\\u6570\\u7684\\u72B6\\u6001\\u7684\\u4E00\\u90E8\\u5206\\u88AB\\u4FDD\\u5B58\\u4E86\\u4E0B\\u6765\\u3002\"));\n}\n;\nMDXContent.isMDXComponent = true;","slug":"/javascript-scopes-and-closures/","title":"JavaScript 作用域和闭包","tags":[],"date":"March 24, 2014","image":null,"imageAlt":null,"socialImage":null},"previous":{"__typename":"MdxBlogPost","id":"735d0d2b-9602-55d8-969d-bfffa5103d77","excerpt":"动态和函数式编程，是 JavaScript 的几个基本特性之一。动态让语言更加灵活和自由，函数式编程则是 JavaScript 的主要编程风格。 JavaScript 的另外几个重要特性，如作用域链与闭包、基于原型的面向对象等，将在其它文章中讨论。 动态 静态语言 vs…","slug":"/javascript-features/","title":"JavaScript 特性","date":"March 21, 2014"},"next":{"__typename":"MdxBlogPost","id":"02b7ccc1-1813-5944-aabd-22d826a9b9d3","excerpt":"JavaScript 支持面向对象的编程风格。 对很多开发者来说，“JavaScript 面向对象”这句话听起来就是在扯淡，它连  class  都没有，你是在逗我吗？ 事实上 JavaScript…","slug":"/javascript-prototype-based-object-oriented/","title":"JavaScript 基于原型的面向对象","date":"March 25, 2014"}},"pageContext":{"id":"b851b588-fc1b-5dad-9e44-cf57e54d58d0","previousId":"735d0d2b-9602-55d8-969d-bfffa5103d77","nextId":"02b7ccc1-1813-5944-aabd-22d826a9b9d3","maxWidth":1380}},"staticQueryHashes":["2744905544","3090755652","386998304","764694655"]}