<html lang="zh-Hans-CN"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" as="image" href="/assets/c134a5c032648146.png"/><link rel="preload" as="image" href="/assets/a0736d0e7e8d470e.png"/><script src="/assets/EWFGSKOU.js" async=""></script><title>一个模拟时钟的时间选择器 ClockPicker</title><meta name="title" content="一个模拟时钟的时间选择器 ClockPicker"/><meta name="og:site_name" content="WeAreOutMan"/><meta name="og:title" content="一个模拟时钟的时间选择器 ClockPicker"/><meta name="og:type" content="article"/><meta name="og:url" content="https://www.wangshenwei.com/introduce-clockpicker/"/><meta name="og:image" content="https://www.wangshenwei.com/assets/a0736d0e7e8d470e.png"/><meta name="twitter:card" content="summary"/><meta name="twitter:url" content="https://www.wangshenwei.com/introduce-clockpicker/"/><meta name="twitter:title" content="一个模拟时钟的时间选择器 ClockPicker"/><meta name="twitter:image" content="https://www.wangshenwei.com/assets/a0736d0e7e8d470e.png"/><link rel="icon" href="/assets/a0736d0e7e8d470e.png"/><link rel="preconnect" href="https://fonts.googleapis.com"/><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin=""/><link href="https://fonts.googleapis.com/css2?family=Merriweather:ital,wght@0,400;0,700;1,400;1,700&amp;family=Montserrat:wght@700;900&amp;display=swap" rel="stylesheet"/><link rel="stylesheet" href="/assets/main.caad21e9.css"/></head><body><header class="page-header"><a href="/">WeAreOutMan</a><color-mode-switch></color-mode-switch></header><main><article><h1>一个模拟时钟的时间选择器 ClockPicker</h1><p class="post-date">April 24, 2014</p><blockquote>
<p>最近开发的一个模拟时钟的时间选择器 ClockPicker，用于 Bootstrap，或者单独作为一个 jQuery 插件。</p>
<p>源代码托管在 GitHub 上: <a href="https://github.com/weareoutman/clockpicker">ClockPicker</a></p>
</blockquote>
<p>最近项目中需要用到一个时间选择器，之前用到的 <a href="https://www.malot.fr/bootstrap-datetimepicker/">bootstrap-datetimepicker</a> 在选择日期时蛮好用，但是它的时间选择（时:分）却有点别扭，后来发现 Android 上调闹铃时的选择器挺不错，于是决定自己开发一个类似的模拟时钟的时间选择器。</p>
<p>最开始只是打算做一个用于 Bootstrap 的组件，后来发现我只是用了 Bootstrap 的 <code>.popover</code> 和一些 <code>.btn</code> 的样式，于是我将这些样式取出来，让它同时支持单独作为一个 jQuery 插件。</p>
<p>先看看截图，使用过 Android 手机的亲人们对此应该不陌生：</p>
<p><img src="/assets/c134a5c032648146.png" alt="Screenshot"/></p>
<h3>Demo</h3>
<p><a href="https://weareoutman.github.io/clockpicker/">https://weareoutman.github.io/clockpicker/</a></p>
<h3>浏览器兼容性</h3>
<p>支持所有主流浏览器，包括 IE 9+ 。理论上在 IE 8 下也能正常运行，除了没有圆角边框、指针效果外。不过我没有仔细测试它在 IE 8 下的表现。</p>
<p>如果你的项目必须兼容 IE 6/7 ，你可能得另辟蹊径！</p>
<h3>设备兼容性</h3>
<p>除了桌面设备外，它也能很好的支持移动设备。如果你使用触摸屏设备，你可以拖动指针转动。当然，桌面设备也可以按住鼠标进行拖动选择。</p>
<p>另外，如果你的手机支持，在点选或拖动指针时，会有力学反馈哦。这个细节也是模仿自手机上的体验。</p>
<h3>使用</h3>
<pre class="shiki dark-plus" style="background-color:#1E1E1E;color:#D4D4D4" tabindex="0"><code><span class="line"><span style="color:#6A9955">&lt;!-- Bootstrap stylesheet and scripts --&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955">&lt;!-- ClockPicker Stylesheet and script --&gt;</span></span>
<span class="line"><span style="color:#808080">&lt;</span><span style="color:#569CD6">link</span><span style="color:#9CDCFE"> rel</span><span style="color:#D4D4D4">=</span><span style="color:#CE9178">&quot;stylesheet&quot;</span><span style="color:#9CDCFE"> type</span><span style="color:#D4D4D4">=</span><span style="color:#CE9178">&quot;text/css&quot;</span><span style="color:#9CDCFE"> href</span><span style="color:#D4D4D4">=</span><span style="color:#CE9178">&quot;dist/bootstrap-clockpicker.min.css&quot;</span><span style="color:#808080">&gt;</span></span>
<span class="line"><span style="color:#808080">&lt;</span><span style="color:#569CD6">script</span><span style="color:#9CDCFE"> type</span><span style="color:#D4D4D4">=</span><span style="color:#CE9178">&quot;text/javascript&quot;</span><span style="color:#9CDCFE"> src</span><span style="color:#D4D4D4">=</span><span style="color:#CE9178">&quot;dist/bootstrap-clockpicker.min.js&quot;</span><span style="color:#808080">&gt;&lt;/</span><span style="color:#569CD6">script</span><span style="color:#808080">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955">&lt;!-- Input group, just add class &#x27;clockpicker&#x27;, and optional data-* --&gt;</span></span>
<span class="line"><span style="color:#808080">&lt;</span><span style="color:#569CD6">div</span><span style="color:#9CDCFE"> class</span><span style="color:#D4D4D4">=</span><span style="color:#CE9178">&quot;input-group clockpicker&quot;</span><span style="color:#9CDCFE"> data-placement</span><span style="color:#D4D4D4">=</span><span style="color:#CE9178">&quot;right&quot;</span><span style="color:#9CDCFE"> data-align</span><span style="color:#D4D4D4">=</span><span style="color:#CE9178">&quot;top&quot;</span><span style="color:#9CDCFE"> data-autoclose</span><span style="color:#D4D4D4">=</span><span style="color:#CE9178">&quot;true&quot;</span><span style="color:#808080">&gt;</span></span>
<span class="line"><span style="color:#808080">	&lt;</span><span style="color:#569CD6">input</span><span style="color:#9CDCFE"> type</span><span style="color:#D4D4D4">=</span><span style="color:#CE9178">&quot;text&quot;</span><span style="color:#9CDCFE"> class</span><span style="color:#D4D4D4">=</span><span style="color:#CE9178">&quot;form-control&quot;</span><span style="color:#9CDCFE"> value</span><span style="color:#D4D4D4">=</span><span style="color:#CE9178">&quot;09:32&quot;</span><span style="color:#808080"> /&gt;</span></span>
<span class="line"><span style="color:#808080">	&lt;</span><span style="color:#569CD6">span</span><span style="color:#9CDCFE"> class</span><span style="color:#D4D4D4">=</span><span style="color:#CE9178">&quot;input-group-addon&quot;</span><span style="color:#808080">&gt;</span></span>
<span class="line"><span style="color:#808080">		&lt;</span><span style="color:#569CD6">span</span><span style="color:#9CDCFE"> class</span><span style="color:#D4D4D4">=</span><span style="color:#CE9178">&quot;glyphicon glyphicon-time&quot;</span><span style="color:#808080">&gt;&lt;/</span><span style="color:#569CD6">span</span><span style="color:#808080">&gt;</span></span>
<span class="line"><span style="color:#808080">	&lt;/</span><span style="color:#569CD6">span</span><span style="color:#808080">&gt;</span></span>
<span class="line"><span style="color:#808080">&lt;/</span><span style="color:#569CD6">div</span><span style="color:#808080">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955">&lt;!-- Or just a input --&gt;</span></span>
<span class="line"><span style="color:#808080">&lt;</span><span style="color:#569CD6">input</span><span style="color:#9CDCFE"> id</span><span style="color:#D4D4D4">=</span><span style="color:#CE9178">&quot;demo-input&quot;</span><span style="color:#808080"> /&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#808080">&lt;</span><span style="color:#569CD6">script</span><span style="color:#9CDCFE"> type</span><span style="color:#D4D4D4">=</span><span style="color:#CE9178">&quot;text/javascript&quot;</span><span style="color:#808080">&gt;</span></span>
<span class="line"><span style="color:#DCDCAA">$</span><span style="color:#FFD700">(</span><span style="color:#CE9178">&#x27;.clockpicker&#x27;</span><span style="color:#FFD700">)</span><span style="color:#D4D4D4">.</span><span style="color:#DCDCAA">clockpicker</span><span style="color:#FFD700">(</span><span style="color:#FFD700">)</span></span>
<span class="line"><span style="color:#D4D4D4">	.</span><span style="color:#DCDCAA">find</span><span style="color:#FFD700">(</span><span style="color:#CE9178">&#x27;input&#x27;</span><span style="color:#FFD700">)</span><span style="color:#D4D4D4">.</span><span style="color:#DCDCAA">change</span><span style="color:#FFD700">(</span><span style="color:#569CD6">function</span><span style="color:#DA70D6">(</span><span style="color:#DA70D6">)</span><span style="color:#DA70D6">{</span></span>
<span class="line"><span style="color:#6A9955">		// TODO: time changed</span></span>
<span class="line"><span style="color:#9CDCFE">		console</span><span style="color:#D4D4D4">.</span><span style="color:#DCDCAA">log</span><span style="color:#179FFF">(</span><span style="color:#569CD6">this</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">value</span><span style="color:#179FFF">)</span><span style="color:#D4D4D4">;</span></span>
<span class="line"><span style="color:#D4D4D4">	</span><span style="color:#DA70D6">}</span><span style="color:#FFD700">)</span><span style="color:#D4D4D4">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#DCDCAA">$</span><span style="color:#FFD700">(</span><span style="color:#CE9178">&#x27;#demo-input&#x27;</span><span style="color:#FFD700">)</span><span style="color:#D4D4D4">.</span><span style="color:#DCDCAA">clockpicker</span><span style="color:#FFD700">(</span><span style="color:#DA70D6">{</span></span>
<span class="line"><span style="color:#9CDCFE">	autoclose:</span><span style="color:#569CD6"> true</span></span>
<span class="line"><span style="color:#DA70D6">}</span><span style="color:#FFD700">)</span><span style="color:#D4D4D4">;</span></span>
<span class="line"><span style="color:#808080">&lt;/</span><span style="color:#569CD6">script</span><span style="color:#808080">&gt;</span></span></code></pre>
<p>对于非 Bootstrap 项目，直接使用 <code>jquery-*</code> 的文件（替换 <code>bootstrap-*</code> ）即可。</p>
<h3>选项参数</h3>
<table><thead><tr><th>名称</th><th>默认</th><th>说明</th></tr></thead><tbody><tr><td>default</td><td><code>&#x27;&#x27;</code></td><td>默认时间，如 <code>&#x27;13:14&#x27;</code></td></tr><tr><td>placement</td><td><code>&#x27;bottom&#x27;</code></td><td>弹层位置</td></tr><tr><td>align</td><td><code>&#x27;left&#x27;</code></td><td>弹层箭头对齐</td></tr><tr><td>donetext</td><td><code>&#x27;完成&#x27;</code></td><td>完成按钮文字</td></tr><tr><td>autoclose</td><td><code>false</code></td><td>选定分钟后自动关闭</td></tr><tr><td>vibrate</td><td><code>true</code></td><td>拖动指针时小震一下手机</td></tr></tbody></table>
<p><a href="https://github.com/weareoutman/clockpicker">ClockPicker: Fork me on GitHub</a></p></article></main><footer class="page-footer"><hr/><div class="bio"><img class="bio-avatar" src="/assets/a0736d0e7e8d470e.png"/><div class="bio-content">Personal blog by <a href="/">Shenwei Wang</a>.<br/>Writing code, raising kid, exploring the world.</div></div></footer></body></html>