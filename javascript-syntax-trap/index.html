<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.75f38c4997591d90ecdc.css">:root{--reach-skip-nav:1}[data-reach-skip-nav-link]{border:0;clip:rect(0 0 0 0);height:1px;width:1px;margin:-1px;padding:0;overflow:hidden;position:absolute}[data-reach-skip-nav-link]:focus{padding:1rem;position:fixed;top:10px;left:10px;background:#fff;z-index:1;width:auto;height:auto;clip:auto}p.figure-caption{text-align:center;opacity:.6;font-size:87.5%;margin-top:-14px;font-style:italic;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;max-width:90%;margin-left:auto;margin-right:auto;border-bottom:1px solid #ccc;padding-left:28px;padding-right:28px;padding-bottom:7px}hr.divider{border:none;font-size:150%;letter-spacing:.6em;margin-bottom:42px;text-align:center}hr.divider:before{content:"..."}footer>hr{margin-bottom:16px}a[role=button]{cursor:pointer}.highlight{border-left:3px solid #cc4c33;padding-left:13px;padding-right:16px;margin-left:-16px;margin-right:-16px}[data-reach-skip-nav-link]{display:none}.search-mark{box-shadow:0 1px 0 0 currentColor}.slide-ignore-end,.slide-ignore-start,.slide-only,.slide-page-end,.slide-page-start,.slide-title{display:none}.slide-canvas{display:flex;justify-content:center;align-items:center;height:calc(100vh - 64px)}.slide-canvas>section :first-child{margin-top:0}.slide-canvas>section :last-child{margin-bottom:0}.slide-canvas .slide-only{display:block}.slide-title-page{font-family:Montserrat,sans-serif;font-size:32px;text-align:center}.slide-canvas .prism-code{margin-left:0;margin-right:0;border-radius:10px}body.headless :not(article)>header,body.headless main+footer{display:none}@media screen and (min-width:40em){h1>a{font-size:32px}.prism-code{border-radius:10px}}.slide-bounce-left{animation:bounce-left .2s ease 0ms 4 alternate}.slide-bounce-right{animation:bounce-right .2s ease 0ms 4 alternate}@keyframes bounce-left{0%{transform:translateX(0)}to{transform:translateX(32px)}}@keyframes bounce-right{0%{transform:translateX(0)}to{transform:translateX(-32px)}}</style><meta name="generator" content="Gatsby 2.24.10"/><link rel="preconnect" href="https://www.google-analytics.com"/><link rel="dns-prefetch" href="https://www.google-analytics.com"/><title data-react-helmet="true">JavaScript 语法陷阱 | WeAreOutMan</title><link data-react-helmet="true" rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Merriweather:ital,wght@0,400;0,700;1,400;1,700&amp;family=Montserrat:wght@700;900&amp;display=swap"/><meta data-react-helmet="true" property="og:image" content="https://www.wangshenwei.com/static/2b467d8e9e1c0d3a8662ef8c8a223a18/88b72/avatar.png"/><meta data-react-helmet="true" name="description" content="码代码虽易，不出bug不易，且码且珍惜 没有一门编程语言是完美的，JavaScript 也不例外，它语法陷阱重重，防不胜防： 加号 &quot;with&quot; 分号自动插入 声明提升 &quot;eval&quot; 多行字符串 变量泄漏 &quot;arguments.callee…"/><meta data-react-helmet="true" property="og:title" content="JavaScript 语法陷阱"/><meta data-react-helmet="true" property="og:description" content="码代码虽易，不出bug不易，且码且珍惜 没有一门编程语言是完美的，JavaScript 也不例外，它语法陷阱重重，防不胜防： 加号 &quot;with&quot; 分号自动插入 声明提升 &quot;eval&quot; 多行字符串 变量泄漏 &quot;arguments.callee…"/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" name="twitter:creator" content="Shenwei Wang"/><meta data-react-helmet="true" name="twitter:title" content="JavaScript 语法陷阱"/><meta data-react-helmet="true" name="twitter:description" content="码代码虽易，不出bug不易，且码且珍惜 没有一门编程语言是完美的，JavaScript 也不例外，它语法陷阱重重，防不胜防： 加号 &quot;with&quot; 分号自动插入 声明提升 &quot;eval&quot; 多行字符串 变量泄漏 &quot;arguments.callee…"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><link rel="icon" href="/favicon-32x32.png?v=2b467d8e9e1c0d3a8662ef8c8a223a18"/><link rel="manifest" href="/manifest.webmanifest"/><link as="script" rel="preload" href="/webpack-runtime-4d61d6f36b696a0865b2.js"/><link as="script" rel="preload" href="/framework-42897c4e770e3c8b7b7b.js"/><link as="script" rel="preload" href="/styles-2d4804b503525347efbe.js"/><link as="script" rel="preload" href="/app-bc0fa8565171cdc976ba.js"/><link as="script" rel="preload" href="/commons-c09e6334871a95b3802a.js"/><link as="script" rel="preload" href="/component---node-modules-gatsby-theme-blog-core-src-templates-post-query-js-e132334849c54914e889.js"/><link as="fetch" rel="preload" href="/page-data/javascript-syntax-trap/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/static/d/2744905544.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/static/d/3090755652.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/static/d/386998304.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/static/d/764694655.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><script>(function() { try {
  var mode = localStorage.getItem('theme-ui-color-mode');
  if (!mode) return
  document.body.classList.add('theme-ui-' + mode);
} catch (e) {} })();</script><div id="___gatsby"><style data-emotion-css="wnkb0j">body{--theme-ui-colors-text:var(--theme-ui-colors-text,hsl(10,20%,20%));--theme-ui-colors-background:var(--theme-ui-colors-background,hsl(10,10%,98%));--theme-ui-colors-primary:var(--theme-ui-colors-primary,hsl(10,80%,50%));--theme-ui-colors-secondary:var(--theme-ui-colors-secondary,hsl(10,60%,50%));--theme-ui-colors-highlight:var(--theme-ui-colors-highlight,hsl(10,40%,90%));--theme-ui-colors-purple:var(--theme-ui-colors-purple,hsl(250,60%,30%));--theme-ui-colors-muted:var(--theme-ui-colors-muted,hsl(10,20%,94%));--theme-ui-colors-gray:var(--theme-ui-colors-gray,hsl(10,20%,50%));--theme-ui-colors-inline-code:var(--theme-ui-colors-inline-code,hsl(10,60%,50%));color:var(--theme-ui-colors-text,hsl(10,20%,20%));background-color:var(--theme-ui-colors-background,hsl(10,10%,98%));}body.theme-ui-dark{--theme-ui-colors-text:var(--theme-ui-colors-modes-dark-text,hsl(210,50%,96%));--theme-ui-colors-background:var(--theme-ui-colors-modes-dark-background,hsl(230,25%,18%));--theme-ui-colors-muted:var(--theme-ui-colors-modes-dark-muted,hsla(230,20%,0%,20%));--theme-ui-colors-primary:var(--theme-ui-colors-modes-dark-primary,rgb(242,95,92));--theme-ui-colors-secondary:var(--theme-ui-colors-modes-dark-secondary,hsl(10,80%,50%));--theme-ui-colors-inline-code:var(--theme-ui-colors-modes-dark-inline-code,hsl(290,100%,80%));}</style><style data-emotion-css="jr3v97">*{box-sizing:border-box;}body{margin:0;font-family:'Merriweather','Georgia',serif;line-height:1.75;font-weight:400;font-size:16px;}</style><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><style data-emotion-css="628fci">.css-628fci{font-family:'Merriweather','Georgia',serif;line-height:1.75;font-weight:400;font-size:16px;}</style><div class="css-628fci"><header><style data-emotion-css="19seewt">.css-19seewt{color:var(--theme-ui-colors-primary,hsl(10,80%,50%));-webkit-text-decoration:none;text-decoration:none;box-shadow:0 1px 0 0 currentColor;}.css-19seewt:hover{color:var(--theme-ui-colors-secondary,hsl(10,60%,50%));}</style><a class="css-19seewt" href="#reach-skip-nav" data-reach-skip-link="" data-reach-skip-nav-link="">Skip to content</a><style data-emotion-css="ckq4zy">.css-ckq4zy{max-width:704px;margin-left:auto;margin-right:auto;padding-left:16px;padding-right:16px;padding-top:32px;}</style><div class="css-ckq4zy"><style data-emotion-css="pcqfzb">.css-pcqfzb{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-bottom:8px;}</style><div class="css-pcqfzb"><style data-emotion-css="1qd1r5f">.css-1qd1r5f{margin-top:0;margin-bottom:0;}</style><style data-emotion-css="dkbyqt">.css-dkbyqt{font-family:Montserrat,sans-serif;font-weight:700;line-height:1.25;font-size:20px;margin-top:0;margin-bottom:0;}@media screen and (min-width:40em){.css-dkbyqt{font-size:24px;}}</style><p class="css-dkbyqt"><style data-emotion-css="15vs81m">.css-15vs81m{box-shadow:none;-webkit-text-decoration:none;text-decoration:none;color:var(--theme-ui-colors-primary,hsl(10,80%,50%));}</style><style data-emotion-css="14rk83l">.css-14rk83l{color:var(--theme-ui-colors-primary,hsl(10,80%,50%));-webkit-text-decoration:none;text-decoration:none;box-shadow:0 1px 0 0 currentColor;box-shadow:none;-webkit-text-decoration:none;text-decoration:none;color:var(--theme-ui-colors-primary,hsl(10,80%,50%));}.css-14rk83l:hover{color:var(--theme-ui-colors-secondary,hsl(10,60%,50%));}</style><a class="css-14rk83l" href="/">WeAreOutMan</a></p><style data-emotion-css="135vz7z">.css-135vz7z{box-shadow:none;-webkit-text-decoration:none;text-decoration:none;}</style><style data-emotion-css="o63vl5">.css-o63vl5{color:var(--theme-ui-colors-primary,hsl(10,80%,50%));-webkit-text-decoration:none;text-decoration:none;box-shadow:0 1px 0 0 currentColor;box-shadow:none;-webkit-text-decoration:none;text-decoration:none;}.css-o63vl5:hover{color:var(--theme-ui-colors-secondary,hsl(10,60%,50%));}</style><a role="button" class="css-o63vl5">Dark</a></div></div></header><div id="reach-skip-nav" data-reach-skip-nav-content=""></div><div><style data-emotion-css="b93ooj">.css-b93ooj{max-width:704px;margin-left:auto;margin-right:auto;padding-left:16px;padding-right:16px;padding-top:32px;padding-bottom:32px;}</style><div class="css-b93ooj"><main><article><header><style data-emotion-css="17d3iyk">.css-17d3iyk{font-family:Montserrat,sans-serif;font-weight:900;line-height:1.25;font-size:32px;-webkit-letter-spacing:-0.03em;-moz-letter-spacing:-0.03em;-ms-letter-spacing:-0.03em;letter-spacing:-0.03em;margin-top:16px;}@media screen and (min-width:40em){.css-17d3iyk{font-size:40px;}}</style><h1 class="css-17d3iyk">JavaScript 语法陷阱</h1><style data-emotion-css="1h1xv8c">.css-1h1xv8c{font-size:14px;margin-top:-16px;margin-bottom:16px;}</style><style data-emotion-css="1w2ean9">.css-1w2ean9{margin-top:32px;margin-bottom:32px;font-size:14px;margin-top:-16px;margin-bottom:16px;}</style><p class="css-1w2ean9">March 26, 2014</p></header><section><style data-emotion-css="1vwrubw">.css-1vwrubw{padding-left:32px;padding-right:32px;margin-left:0;margin-right:0;border-left:5px solid #ccc;opacity:0.8;}.css-1vwrubw footer{opacity:0.6;}</style><blockquote class="css-1vwrubw"><style data-emotion-css="zitybv">.css-zitybv{margin-top:32px;margin-bottom:32px;}</style><p class="css-zitybv">码代码虽易，不出bug不易，且码且珍惜</p></blockquote><p class="css-zitybv">没有一门编程语言是完美的，JavaScript 也不例外，它语法陷阱重重，防不胜防：</p><ul class="css-0"><li class="css-0">加号</li><li class="css-0">“with”</li><li class="css-0">分号自动插入</li><li class="css-0">声明提升</li><li class="css-0">“eval”</li><li class="css-0">多行字符串</li><li class="css-0">变量泄漏</li><li class="css-0">“arguments.callee”</li><li class="css-0">…</li></ul><p class="css-zitybv">了解和熟悉这些陷阱，并在开发时注意规避它们，可以给我们省去很多麻烦事。</p><style data-emotion-css="1s5fzdc">.css-1s5fzdc{font-family:Montserrat,sans-serif;font-weight:700;line-height:1.25;font-size:20px;}@media screen and (min-width:40em){.css-1s5fzdc{font-size:24px;}}</style><style data-emotion-css="yrflg2">.css-yrflg2{pointer-events:painted;font-family:Montserrat,sans-serif;font-weight:700;line-height:1.25;font-size:20px;}.css-yrflg2 a{visibility:hidden;}.css-yrflg2:hover a{visibility:visible;}@media screen and (min-width:40em){.css-yrflg2{font-size:24px;}}</style><h3 id="加号" class="css-yrflg2"><style data-emotion-css="1minv35">.css-1minv35{margin-left:-20px;padding-right:4px;color:var(--theme-ui-colors-primary,hsl(10,80%,50%));}</style><a href="#加号" aria-label="加号" class="css-1minv35"><svg viewBox="0 0 16 16" width="16" height="16" fill="currentcolor" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>加号</h3><p class="css-zitybv">作为二元运算符时，<style data-emotion-css="m301d5">.css-m301d5{font-family:Menlo,monospace;color:var(--theme-ui-colors-inline-code,hsl(10,60%,50%));background-color:var(--theme-ui-colors-muted,hsl(10,20%,94%));padding-left:3px;padding-right:3px;}</style><code class="css-m301d5">+</code> 既是数学运算的加法，也是字符串的拼接。另外，它还可以作为一元符号，表示正数。</p><p class="css-zitybv">看看下面的代码：</p><style data-emotion-css="1v64iiv">.css-1v64iiv{font-family:Menlo,monospace;font-size:14px;padding:16px;color:#9CDCFE;background-color:#1E1E1E;overflow:auto;margin-bottom:32px;margin-left:-16px;margin-right:-16px;}.css-1v64iiv .comment,.css-1v64iiv .prolog,.css-1v64iiv .doctype,.css-1v64iiv .cdata,.css-1v64iiv .punctuation,.css-1v64iiv .operator,.css-1v64iiv .entity,.css-1v64iiv .url{color:var(--theme-ui-colors-gray,hsl(10,20%,50%));}.css-1v64iiv .comment{color:rgb(106,153,85);}.css-1v64iiv .property,.css-1v64iiv .tag,.css-1v64iiv .boolean,.css-1v64iiv .number,.css-1v64iiv .constant,.css-1v64iiv .symbol,.css-1v64iiv .deleted,.css-1v64iiv .function,.css-1v64iiv .class-name,.css-1v64iiv .regex,.css-1v64iiv .important,.css-1v64iiv .variable{color:var(--theme-ui-colors-purple,hsl(250,60%,30%));}.css-1v64iiv .atrule,.css-1v64iiv .attr-value,.css-1v64iiv .keyword{color:var(--theme-ui-colors-primary,hsl(10,80%,50%));}.css-1v64iiv .selector,.css-1v64iiv .attr-name,.css-1v64iiv .string,.css-1v64iiv .char,.css-1v64iiv .builtin,.css-1v64iiv .inserted{color:var(--theme-ui-colors-secondary,hsl(10,60%,50%));}.css-1v64iiv .property,.css-1v64iiv .title,.css-1v64iiv .important,.css-1v64iiv .boolean,.css-1v64iiv .regex{color:inherit;}.css-1v64iiv .regex{color:var(--theme-ui-colors-secondary,hsl(10,60%,50%));}.css-1v64iiv code{color:inherit;}.css-1v64iiv .prolog{color:rgb(0,0,128);}.css-1v64iiv .builtin,.css-1v64iiv .changed,.css-1v64iiv .keyword{color:rgb(86,156,214);}.css-1v64iiv .number,.css-1v64iiv .inserted{color:rgb(181,206,168);}.css-1v64iiv .constant{color:rgb(100,102,149);}.css-1v64iiv .attr-name,.css-1v64iiv .variable{color:rgb(156,220,254);}.css-1v64iiv .deleted,.css-1v64iiv .string,.css-1v64iiv .attr-value{color:rgb(206,145,120);}.css-1v64iiv .selector{color:rgb(215,186,125);}.css-1v64iiv .tag{color:rgb(86,156,214);}.css-1v64iiv .punctuation,.css-1v64iiv .operator{color:rgb(212,212,212);}.css-1v64iiv .punctuation{color:#808080;}.css-1v64iiv .function{color:rgb(220,220,170);}.css-1v64iiv .class-name{color:rgb(78,201,176);}.css-1v64iiv .char{color:rgb(209,105,105);}.css-1v64iiv .highlight{background:hsla(0,0%,40%,.5);}</style><style data-emotion-css="a7hg0h">.css-a7hg0h{font-family:Menlo,monospace;color:#9cdcfe;font-size:14px;}</style><style data-emotion-css="194ank4">.css-194ank4{font-family:Menlo,monospace;font-size:14px;padding:16px;color:#9CDCFE;background-color:#1E1E1E;overflow:auto;margin-bottom:32px;margin-left:-16px;margin-right:-16px;font-family:Menlo,monospace;color:#9cdcfe;font-size:14px;}.css-194ank4 .comment,.css-194ank4 .prolog,.css-194ank4 .doctype,.css-194ank4 .cdata,.css-194ank4 .punctuation,.css-194ank4 .operator,.css-194ank4 .entity,.css-194ank4 .url{color:var(--theme-ui-colors-gray,hsl(10,20%,50%));}.css-194ank4 .comment{color:rgb(106,153,85);}.css-194ank4 .property,.css-194ank4 .tag,.css-194ank4 .boolean,.css-194ank4 .number,.css-194ank4 .constant,.css-194ank4 .symbol,.css-194ank4 .deleted,.css-194ank4 .function,.css-194ank4 .class-name,.css-194ank4 .regex,.css-194ank4 .important,.css-194ank4 .variable{color:var(--theme-ui-colors-purple,hsl(250,60%,30%));}.css-194ank4 .atrule,.css-194ank4 .attr-value,.css-194ank4 .keyword{color:var(--theme-ui-colors-primary,hsl(10,80%,50%));}.css-194ank4 .selector,.css-194ank4 .attr-name,.css-194ank4 .string,.css-194ank4 .char,.css-194ank4 .builtin,.css-194ank4 .inserted{color:var(--theme-ui-colors-secondary,hsl(10,60%,50%));}.css-194ank4 .property,.css-194ank4 .title,.css-194ank4 .important,.css-194ank4 .boolean,.css-194ank4 .regex{color:inherit;}.css-194ank4 .regex{color:var(--theme-ui-colors-secondary,hsl(10,60%,50%));}.css-194ank4 code{color:inherit;}.css-194ank4 .prolog{color:rgb(0,0,128);}.css-194ank4 .builtin,.css-194ank4 .changed,.css-194ank4 .keyword{color:rgb(86,156,214);}.css-194ank4 .number,.css-194ank4 .inserted{color:rgb(181,206,168);}.css-194ank4 .constant{color:rgb(100,102,149);}.css-194ank4 .attr-name,.css-194ank4 .variable{color:rgb(156,220,254);}.css-194ank4 .deleted,.css-194ank4 .string,.css-194ank4 .attr-value{color:rgb(206,145,120);}.css-194ank4 .selector{color:rgb(215,186,125);}.css-194ank4 .tag{color:rgb(86,156,214);}.css-194ank4 .punctuation,.css-194ank4 .operator{color:rgb(212,212,212);}.css-194ank4 .punctuation{color:#808080;}.css-194ank4 .function{color:rgb(220,220,170);}.css-194ank4 .class-name{color:rgb(78,201,176);}.css-194ank4 .char{color:rgb(209,105,105);}.css-194ank4 .highlight{background:hsla(0,0%,40%,.5);}</style><pre class="language-javascript prism-code language-javascript css-194ank4"><div class="token-line"><span class="token comment">// 1</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token plain">   </span><span class="token number">1</span><span class="token plain"> </span><span class="token operator">+</span><span class="token plain"> </span><span class="token number">2</span><span class="token plain">   </span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"> </span><span class="token comment">// 3</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token plain"> </span><span class="token string">&quot;3&quot;</span><span class="token plain"> </span><span class="token operator">+</span><span class="token plain"> </span><span class="token string">&quot;4&quot;</span><span class="token plain"> </span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"> </span><span class="token comment">// &quot;34&quot;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment">// 2</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token plain">   </span><span class="token number">1</span><span class="token plain"> </span><span class="token operator">+</span><span class="token plain"> </span><span class="token string">&quot;3&quot;</span><span class="token plain"> </span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"> </span><span class="token comment">// &quot;13&quot;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token plain"> </span><span class="token string">&quot;3&quot;</span><span class="token plain"> </span><span class="token operator">+</span><span class="token plain"> </span><span class="token number">1</span><span class="token plain">   </span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"> </span><span class="token comment">// &quot;31&quot;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment">// 3</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token plain"> </span><span class="token number">1</span><span class="token plain"> </span><span class="token operator">+</span><span class="token plain"> </span><span class="token keyword null nil">null</span><span class="token plain">      </span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token plain"> </span><span class="token number">1</span><span class="token plain"> </span><span class="token operator">+</span><span class="token plain"> </span><span class="token keyword nil">undefined</span><span class="token plain"> </span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token plain"> </span><span class="token number">1</span><span class="token plain"> </span><span class="token operator">+</span><span class="token plain"> </span><span class="token number">NaN</span><span class="token plain">       </span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment">// 4</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token plain"> </span><span class="token string">&quot;3&quot;</span><span class="token plain"> </span><span class="token operator">+</span><span class="token plain"> </span><span class="token keyword null nil">null</span><span class="token plain">      </span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token plain"> </span><span class="token string">&quot;3&quot;</span><span class="token plain"> </span><span class="token operator">+</span><span class="token plain"> </span><span class="token keyword nil">undefined</span><span class="token plain"> </span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token plain"> </span><span class="token string">&quot;3&quot;</span><span class="token plain"> </span><span class="token operator">+</span><span class="token plain"> </span><span class="token number">NaN</span><span class="token plain">       </span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment">// 5</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token plain"> </span><span class="token number">1</span><span class="token plain"> </span><span class="token operator">+</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token plain"> </span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token plain"> </span><span class="token number">1</span><span class="token plain"> </span><span class="token operator">+</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token plain"> </span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment">// 6</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token plain"> </span><span class="token string">&quot;3&quot;</span><span class="token plain"> </span><span class="token operator">+</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token plain"> </span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token plain"> </span><span class="token string">&quot;3&quot;</span><span class="token plain"> </span><span class="token operator">+</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token plain"> </span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></pre><p class="css-zitybv">也许你可以准确的说出第1组代码的结果，甚至第2组也能答上，但剩下的几组你能毫不犹豫地给出答案吗？</p><p class="css-zitybv">在 JavaScript 中，是如何决定一段代码中的 <code class="css-m301d5">+</code> 是数学运算还是字符串拼接呢？答案请看下面这段逻辑：</p><pre class="prism-code language-css-a7hg0h css-194ank4"><div class="token-line"><span class="token plain">a + b:</span></div><div class="token-line"><span class="token plain">    pa = ToPrimitive(a)</span></div><div class="token-line"><span class="token plain">    pb = ToPrimitive(b)</span></div><div class="token-line"><span class="token plain">    if (pa is string || pb is string)</span></div><div class="token-line"><span class="token plain">        return concat(ToString(pa), ToString(pb))</span></div><div class="token-line"><span class="token plain">    else</span></div><div class="token-line"><span class="token plain">        return add(ToNumber(pa), ToNumber(pb))</span></div></pre><ol class="css-0"><li class="css-0">收集 <code class="css-m301d5">+</code> 两端的操作数的原始值。</li><li class="css-0">如果其中之一是字符串，则进行字符串拼接。</li><li class="css-0">否则，执行数学加法。</li></ol><p class="css-zitybv">需要注意的是，JavaScript 的原始值类型包括 number, string, boolean, undefined, 而 null 也是一种特殊的原始值。另一方面，对于非原始值类型（即复合类型，也即 object ）的变量，其原始值被认为是字符串。</p><p class="css-zitybv">按这个逻辑，之前的测试结果就容易理解了。当然，像上面那样使用加号是不被推荐的，为了避免混淆，利用上面的加号逻辑，我们通常可以这样使用加号：</p><pre class="language-javascript prism-code language-javascript css-194ank4"><div class="token-line"><span class="token comment">// 确保数字相加</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">a </span><span class="token operator">=</span><span class="token plain"> </span><span class="token operator">+</span><span class="token plain">b </span><span class="token operator">+</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token operator">+</span><span class="token plain">c</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment">// 确保变量 d 为字符串</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">d </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string">&quot;&quot;</span><span class="token plain"> </span><span class="token operator">+</span><span class="token plain"> d</span><span class="token punctuation">;</span></div></pre><h3 id="with" class="css-yrflg2"><a href="#with" aria-label="“with”" class="css-1minv35"><svg viewBox="0 0 16 16" width="16" height="16" fill="currentcolor" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>“with”</h3><p class="css-zitybv">使用 <code class="css-m301d5">with</code> 语句，可以将一个语句块的上下文绑定为一个指定对象。</p><pre class="language-javascript prism-code language-javascript css-194ank4"><div class="token-line"><span class="token keyword">with</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token dom variable">document</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">&quot;foo&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token function">getElemntById</span><span class="token punctuation">(</span><span class="token string">&quot;bar&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token property-access">innerHTML</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string">&quot;foobar&quot;</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&quot;Hello world!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><style data-emotion-css="1baulvz">.css-1baulvz{display:inline-block;}</style><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment">// 等同于以下代码</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token method function property-access">write</span><span class="token punctuation">(</span><span class="token string">&quot;foo&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token method function property-access">getElemntById</span><span class="token punctuation">(</span><span class="token string">&quot;bar&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token property-access">innerHTML</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string">&quot;foobar&quot;</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token dom variable">window</span><span class="token punctuation">.</span><span class="token method function property-access">alert</span><span class="token punctuation">(</span><span class="token string">&quot;Hello world!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></pre><p class="css-zitybv">但是咱们不推荐使用 with ，事实上，ECMAScript 5 中引入的严格模式也禁止使用 with ：</p><ol class="css-0"><li class="css-0">JavaScript 解释器引擎将难以对代码执行优化。解释器引擎的执行优化是建立在“明确的知道这个变量在运行时所指向的引用”的基础上的。而在 with 语句块中的变量或函数，在解释阶段无法判断其是属于 with 的上下文，还是其所在作用域，只有等到代码运行时才能确定。</li><li class="css-0">代码可阅读性差。</li></ol><h3 id="分号自动插入" class="css-yrflg2"><a href="#分号自动插入" aria-label="分号自动插入" class="css-1minv35"><svg viewBox="0 0 16 16" width="16" height="16" fill="currentcolor" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>分号自动插入</h3><p class="css-zitybv">在语句结束时，你不必手动输入分号，换行即可。</p><pre class="language-javascript prism-code language-javascript css-194ank4"><div class="token-line"><span class="token keyword">function</span><span class="token plain"> </span><span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">var</span><span class="token plain"> bar </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string">&quot;value&quot;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">return</span><span class="token plain"> bar</span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment">// `{}` 包围的语句块的最后一个语句的分号也可省略</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">function</span><span class="token plain"> </span><span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"> </span><span class="token keyword">return</span><span class="token plain"> </span><span class="token string">&quot;foo&quot;</span><span class="token plain"> </span><span class="token punctuation">}</span></div></pre><p class="css-zitybv">开发者们每写一行代码，就可以少敲打一次键盘，这看起来很人性化。但过于依赖分号自动插入，会带来一些潜在问题。</p><pre class="language-javascript prism-code language-javascript css-194ank4"><div class="token-line"><span class="token keyword">function</span><span class="token plain"> </span><span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">return</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        bar</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token number">1</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">function</span><span class="token plain"> </span><span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">var</span><span class="token plain"> a</span><span class="token punctuation">,</span><span class="token plain"> b</span><span class="token punctuation">,</span><span class="token plain"> c</span><span class="token punctuation">,</span><span class="token plain"> d</span><span class="token punctuation">,</span><span class="token plain"> e</span></div><div class="token-line"><span class="token plain">    a </span><span class="token operator">=</span><span class="token plain"> b </span><span class="token operator">+</span><span class="token plain"> </span><span class="token function">c</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">(</span><span class="token plain">d </span><span class="token operator">+</span><span class="token plain"> e</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span></div></pre><p class="css-zitybv">看看上面的代码，<code class="css-m301d5">foo()</code> 将返回什么？ <code class="css-m301d5">bar()</code> 又将怎么运行？</p><p class="css-zitybv">事实上，前者将返回 <code class="css-m301d5">undefined</code> ，而后者的后两行代码将被理解为 <code class="css-m301d5">a = b + c(d + e).toString()</code> 。</p><p class="css-zitybv">JavaScript 的分号自动插入的规则并不那么清晰可辨，老实地多敲几次键盘，可以避免那些让你摸不着头绪的bug在某一天突然出现。</p><h3 id="声明提升" class="css-yrflg2"><a href="#声明提升" aria-label="声明提升" class="css-1minv35"><svg viewBox="0 0 16 16" width="16" height="16" fill="currentcolor" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>声明提升</h3><p class="css-zitybv">看看下面这段代码，我们将得到什么结果？</p><pre class="language-javascript prism-code language-javascript css-194ank4"><div class="token-line"><span class="token keyword">var</span><span class="token plain"> foo </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">function</span><span class="token plain"> </span><span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token comment">// 这个条件成立吗？</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token plain"> foo</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token keyword">var</span><span class="token plain"> foo </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">10</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token function">alert</span><span class="token punctuation">(</span><span class="token plain">foo</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></pre><p class="css-zitybv">那么这段代码呢？</p><pre class="language-javascript prism-code language-javascript css-194ank4"><div class="token-line"><span class="token keyword">var</span><span class="token plain"> a </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">function</span><span class="token plain"> </span><span class="token function">b</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    a </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">10</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">return</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">function</span><span class="token plain"> </span><span class="token function">a</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token function">b</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token function">alert</span><span class="token punctuation">(</span><span class="token plain">a</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></pre><p class="css-zitybv">第1个例子，也许你会觉得是 “1” ，因为 <code class="css-m301d5">! 1</code> 为假，<code class="css-m301d5">if</code> 里的代码不会执行。而第2个例子，可能你认为应该是 “10” 。</p><p class="css-zitybv">事实上，结果相反，我们将分别得到 “10” 和 “1” 。</p><p class="css-zitybv">在 JavaScript 中，变量、函数的声明会被提升到当前函数主体的顶部，而不管这个声明语句是否出现在了不可到达的地方。</p><p class="css-zitybv">上面的两段其实等同于：</p><pre class="language-javascript prism-code language-javascript css-194ank4"><div class="token-line"><span class="token keyword">var</span><span class="token plain"> foo </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">function</span><span class="token plain"> </span><span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">var</span><span class="token plain"> foo</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token plain"> foo</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        foo </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">10</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token function">alert</span><span class="token punctuation">(</span><span class="token plain">foo</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">var</span><span class="token plain"> a </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">function</span><span class="token plain"> </span><span class="token function">b</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">function</span><span class="token plain"> </span><span class="token function">a</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    a </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">10</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">return</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token function">b</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token function">alert</span><span class="token punctuation">(</span><span class="token plain">a</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></pre><p class="css-zitybv">需要注意的是，只有变量或函数的声明被提升了，而赋值语句并没有。</p><h3 id="eval" class="css-yrflg2"><a href="#eval" aria-label="“eval”" class="css-1minv35"><svg viewBox="0 0 16 16" width="16" height="16" fill="currentcolor" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>“eval”</h3><p class="css-zitybv"><code class="css-m301d5">eval</code> 是 JavaScript 的动态特性之一，在运行时， eval 可以将给定的字符串当作代码语句执行：</p><pre class="language-html prism-code language-html css-194ank4"><div class="token-line"><span class="token tag punctuation">&lt;</span><span class="token tag">script</span><span class="token tag punctuation">&gt;</span><span class="token script language-javascript"></span></div><div class="token-line"><span class="token script language-javascript"></span><span class="token script language-javascript keyword">var</span><span class="token script language-javascript"> func </span><span class="token script language-javascript operator">=</span><span class="token script language-javascript"> </span><span class="token script language-javascript operator">&lt;</span><span class="token script language-javascript operator">?</span><span class="token script language-javascript">php echo </span><span class="token script language-javascript function">json_encode</span><span class="token script language-javascript punctuation">(</span><span class="token script language-javascript">$user_send</span><span class="token script language-javascript punctuation">[</span><span class="token script language-javascript string">&#x27;func&#x27;</span><span class="token script language-javascript punctuation">]</span><span class="token script language-javascript punctuation">)</span><span class="token script language-javascript punctuation">;</span><span class="token script language-javascript"> </span><span class="token script language-javascript operator">?</span><span class="token script language-javascript operator">&gt;</span><span class="token script language-javascript punctuation">;</span><span class="token script language-javascript"></span></div><div class="token-line"><span class="token script language-javascript"></span><span class="token script language-javascript function">eval</span><span class="token script language-javascript punctuation">(</span><span class="token script language-javascript">func </span><span class="token script language-javascript operator">+</span><span class="token script language-javascript"> </span><span class="token script language-javascript string">&quot;()&quot;</span><span class="token script language-javascript punctuation">)</span><span class="token script language-javascript punctuation">;</span><span class="token script language-javascript"></span></div><div class="token-line"><span class="token script language-javascript"></span><span class="token script language-javascript keyword">function</span><span class="token script language-javascript"> </span><span class="token script language-javascript function">sayHello</span><span class="token script language-javascript punctuation">(</span><span class="token script language-javascript punctuation">)</span><span class="token script language-javascript"> </span><span class="token script language-javascript punctuation">{</span><span class="token script language-javascript punctuation">}</span><span class="token script language-javascript"></span></div><div class="token-line"><span class="token script language-javascript"></span><span class="token script language-javascript keyword">function</span><span class="token script language-javascript"> </span><span class="token script language-javascript function">sayGoodbye</span><span class="token script language-javascript punctuation">(</span><span class="token script language-javascript punctuation">)</span><span class="token script language-javascript"> </span><span class="token script language-javascript punctuation">{</span><span class="token script language-javascript punctuation">}</span><span class="token script language-javascript"></span></div><div class="token-line"><span class="token script language-javascript"></span><span class="token tag punctuation">&lt;/</span><span class="token tag">script</span><span class="token tag punctuation">&gt;</span></div></pre><p class="css-zitybv">在代码中用一组字符串与变量拼出另一串代码来运行，这看起来吊爆了。</p><p class="css-zitybv">但请在使用 eval 之前考虑下它将带来的潜在问题：</p><ol class="css-0"><li class="css-0">使用了 eval 的代码可阅读性很差，你读到这样的代码时很难判断它究竟要做啥，即使那是你自己几天前写的。</li><li class="css-0">JavaScript 解释器引擎难以对代码执行优化。</li><li class="css-0">如果 eval 中的字符串包含用户输入的数据，这会给攻击者有机可乘。</li><li class="css-0">如果你是有经验的开发者，大多数情况下你可以使用更高效的函数嵌套（闭包）等来解决问题；如果你没有足够的经验，那更不要使用 eval ，如果你不想你或你的用户遭受攻击。</li></ol><h3 id="多行字符串" class="css-yrflg2"><a href="#多行字符串" aria-label="多行字符串" class="css-1minv35"><svg viewBox="0 0 16 16" width="16" height="16" fill="currentcolor" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>多行字符串</h3><p class="css-zitybv">JavaScript 中不能直接书写多行的字符串，需要在行尾输入一个反斜杠 <code class="css-m301d5">\</code> 。</p><p class="css-zitybv">假设我们的项目中有一段这样的代码：</p><pre class="language-javascript prism-code language-javascript css-194ank4"><div class="token-line"><span class="token keyword">var</span><span class="token plain"> multiStr </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string">&quot;this is a multi-line string, \</span></div><div class="token-line"><span class="token string">and this is the second line. \</span></div><div class="token-line"><span class="token string">yes, the string ends here&quot;</span><span class="token punctuation">;</span></div></pre><p class="css-zitybv">然后做了一些维护和更新：</p><pre class="prism-code language-css-a7hg0h css-194ank4"><div class="token-line"><span class="token plain">var multiStr = &quot;this is a multi-line string, \</span></div><div class="token-line"><span class="token plain">and this is the second line. \ </span></div><div class="token-line"><span class="token plain">now i want to insert a line right here, \</span></div><div class="token-line"><span class="token plain">yes, the string ends here&quot;;</span></div></pre><p class="css-zitybv">凭肉眼似乎没看出毛病，但运行时却得到了一个语法错误，这之前你可能已经注意到语法高亮已经失效了。几经周折，你终于注意到了第2行行尾的那个不起眼的空格。。</p><h3 id="变量泄漏" class="css-yrflg2"><a href="#变量泄漏" aria-label="变量泄漏" class="css-1minv35"><svg viewBox="0 0 16 16" width="16" height="16" fill="currentcolor" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>变量泄漏</h3><p class="css-zitybv">JavaScript 的全局作用域给了我们很多便利，有时我们无需使用 <code class="css-m301d5">var</code> 来声明变量。</p><p class="css-zitybv">很多 JavaScript 的入门开发者，喜欢利用这个“便利”。但事实上它是一个陷阱。它很可能让我们的一些敲打错误被隐藏和掩盖。</p><pre class="language-javascript prism-code language-javascript css-194ank4"><div class="token-line"><span class="token keyword">function</span><span class="token plain"> </span><span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">var</span><span class="token plain"> type </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string">&quot;first&quot;</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token plain">something</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token comment">// 这里假设我们手一抖，把type打成了typo</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        typo </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string">&quot;second&quot;</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">return</span><span class="token plain"> type</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span></div></pre><p class="css-zitybv">这段代码可以让项目长久地稳定运行，但随后的某天，我们吃惊地发现，所有的 type 都是 “first” ！在找到并修复这个手误之前，我们以此得到的数据或结论可能都要被废弃。</p><p class="css-zitybv">直接使用没有声明的变量，将自动创建一个全局变量，滥用会导致全局变量污染，或者让类似上面这样的手误逍遥法外。合理的声明变量，并利用<a href="/article/javascript-scopes-and-closures" class="css-19seewt">作用域链与闭包</a>，是 JavaScript 解决很多问题的思路。</p><h3 id="argumentscallee" class="css-yrflg2"><a href="#argumentscallee" aria-label="“arguments.callee”" class="css-1minv35"><svg viewBox="0 0 16 16" width="16" height="16" fill="currentcolor" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>“arguments.callee”</h3><p class="css-zitybv">写一个递归函数，我们通常这样：</p><pre class="language-javascript prism-code language-javascript css-194ank4"><div class="token-line"><span class="token keyword">function</span><span class="token plain"> </span><span class="token function">factorial</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">return</span><span class="token plain"> n </span><span class="token operator">&lt;=</span><span class="token plain"> </span><span class="token number">1</span><span class="token plain"> </span><span class="token operator">?</span><span class="token plain"> </span><span class="token number">1</span><span class="token plain"> </span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token function">factorial</span><span class="token punctuation">(</span><span class="token plain">n </span><span class="token operator">-</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token operator">*</span><span class="token plain"> n</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token number">2</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token number">3</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token number">4</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token method function property-access">map</span><span class="token punctuation">(</span><span class="token plain">factorial</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></pre><p class="css-zitybv">有时我们不想污染命名空间，需要递归调用一个匿名函数，怎么办？</p><pre class="language-javascript prism-code language-javascript css-194ank4"><div class="token-line"><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token number">2</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token number">3</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token number">4</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token method function property-access">map</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">return</span><span class="token plain"> n </span><span class="token operator">&lt;=</span><span class="token plain"> </span><span class="token number">1</span><span class="token plain"> </span><span class="token operator">?</span><span class="token plain"> </span><span class="token number">1</span><span class="token plain"> </span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token comment">/* what goes here? */</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token plain">n </span><span class="token operator">-</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token operator">*</span><span class="token plain"> n</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></pre><p class="css-zitybv">还好我们有 <code class="css-m301d5">arguments.callee</code> ：</p><pre class="language-javascript prism-code language-javascript css-194ank4"><div class="token-line"><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token number">2</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token number">3</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token number">4</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token method function property-access">map</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">return</span><span class="token plain"> n </span><span class="token operator">&lt;=</span><span class="token plain"> </span><span class="token number">1</span><span class="token plain"> </span><span class="token operator">?</span><span class="token plain"> </span><span class="token number">1</span><span class="token plain"> </span><span class="token punctuation">:</span><span class="token plain"> arguments</span><span class="token punctuation">.</span><span class="token method function property-access">callee</span><span class="token punctuation">(</span><span class="token plain">n </span><span class="token operator">-</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token operator">*</span><span class="token plain"> n</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></pre><p class="css-zitybv">但是同样不推荐使用 arguments.callee ：</p><ol class="css-0"><li class="css-0">访问 arguments.callee 的开销是昂贵的。</li><li class="css-0">使用它将导致 JavaScript 解释器难以执行优化。</li><li class="css-0">从 ECMAScript 3 开始，已经支持<strong class="css-0">命名函数表达式</strong>。</li></ol><p class="css-zitybv">命名函数表达式：</p><pre class="language-javascript prism-code language-javascript css-194ank4"><div class="token-line"><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token number">2</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token number">3</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token number">4</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token method function property-access">map</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token plain"> </span><span class="token function">factorial</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">return</span><span class="token plain"> n </span><span class="token operator">&lt;=</span><span class="token plain"> </span><span class="token number">1</span><span class="token plain"> </span><span class="token operator">?</span><span class="token plain"> </span><span class="token number">1</span><span class="token plain"> </span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token function">factorial</span><span class="token punctuation">(</span><span class="token plain">n </span><span class="token operator">-</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token operator">*</span><span class="token plain"> n</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></pre><p class="css-zitybv">注意，这里的函数 <code class="css-m301d5">factorial()</code> 并不是函数声明，而是命名函数表达式，<code class="css-m301d5">factorial</code> 所处的作用域是其函数本身的作用域（与参数 <code class="css-m301d5">n</code> 属同一个作用域），而不是当前的全局作用域。但是，在 IE8 及以下浏览器中，情况则不同，它将属于全局作用域。</p><h3 id="避开陷阱" class="css-yrflg2"><a href="#避开陷阱" aria-label="避开陷阱" class="css-1minv35"><svg viewBox="0 0 16 16" width="16" height="16" fill="currentcolor" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>避开陷阱</h3><p class="css-zitybv">JavaScript 有这么多的语法陷阱，如何规避，并保证我们的代码质量呢？后面再谈。</p></section></article></main><style data-emotion-css="1i8tjli">.css-1i8tjli{margin-top:32px;padding-top:16px;}</style><footer class="css-1i8tjli"><style data-emotion-css="kbbagd">.css-kbbagd{border:0;border-bottom:1px solid;border-color:var(--theme-ui-colors-muted,hsl(10,20%,94%));}</style><hr class="css-kbbagd"/><style data-emotion-css="j6r63x">.css-j6r63x{margin-bottom:32px;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}</style><style data-emotion-css="u5xevn">.css-u5xevn{box-sizing:border-box;margin:0;min-width:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;margin-bottom:32px;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}</style><div class="css-u5xevn"><style data-emotion-css="1emx3y6">.css-1emx3y6{margin-right:8px;margin-bottom:0;width:48px;min-width:48px;border-radius:99999px;}</style><div class="css-1emx3y6 gatsby-image-wrapper" style="position:relative;overflow:hidden;display:inline-block;width:48px;height:48px"><img aria-hidden="true" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAC4jAAAuIwF4pT92AAAEj0lEQVQ4y02UWWxUVRjH777MTKdTKIEioASDZYsQVmMhIkQwJVaIsUrYiqVUoJ0ynXam0+ls3TvdKVtZLIhGYqMxKEYfIMYnQmJ8NtFHH4wPPvpifn73DqAPv5x779z7+/7nO+eM0pLsoUTmGeeekujhjPBhp0ea5o40TfFuGmNdnDyf5GQsScP5BCfaOjkW7eBISztKvCeLR/sTYv/jfLpEtDtLa0qKdfXQKtfxwoDPuVRWCiQ5JTS2J6RIJ0o6nyWdz9H9jDwpoSuXIykkhM6sSDJZOvMFKZRhX90hXttfy6m2GO25vMwi6dPcIcK+gRy9QkHI9+fIPaUvR1bI9OZI93qFsvSNDvNKzU4URfFxg2GONzeTLORoTSZ8lNFiD6PFDMWRLMVijuJogeGRPIPDOQaGcvQPecUyjEwMcvrsaRFpaLqBYdq+dPmK50kV0nRmksTTkvDKRJLLwuyFbsaH4/Tno0yNdTE1nmZiNI1XsCgFJyZ7Wb+u2pfoItQ0HVXVcF2X9mSUTH+KZLYD5c50jI+Fu7NdFBLH6e06wbWpdq7PJLg8GWdmIs6VmRR9+XNEQkFsVRWZhmEYvnz1S6sojqUp9MXJFWSVv5hu5rvrbeRbD1IRibB98zpmh5r4/KoUmolyc6qFuYttXBo7y4rFFZgiMQzdl0UiIdKpBiYnYgwOnPNRHlw4yk9zTfSe2u2/ZMhUNqyqInb8de5fO8Pd6UY+mfyAr2628n7dDjR5x9Fl2qpCIlrH7astTA2LdOQk40MNKD9Pv80v1+qZT+8jaKmEHdMXr3+hkgeXj3L/wmHmx9/j4UeN9LbsRZXfLN1m2ZJKbo0fYW7sMLPD9VwZqufi4Lsof17aw+8ze/nr5gEOv7rCl1maimNofJl7g0cXD/GjFL0/WsebNdVoVgQ3vBjFXEB97Wa+mXmHWwMHmOuv5UZfLco/t7fw9+w2uL2LfN1KSaAy37KR1Yscdq2p5I8btTwa2cvalVVSLCh7rwIrsAA7sBDDXUTy2FbuDe3hTmaXj8IP1XBvLXy7iV9H1/s9/G14K/NNpS0yc2QNBzY/L9cBfyMbThhLcAMRSRlh65plfN2zjc86NvFpfBPKW9tCHNwS4m50KY/7X8QxdRL7l8DcDjZUBVG0MlSrJNKccjRbrgXbDcvzcmqqq3jctZGHsXV837bWC+FtARVvXLnQpczSWBY2aNi+kKVhG92TyRQ1JyL9C6GZIVQRWiLUpcDLyytJ7X6O2M4qojVLUMpck/KgTURwbZuQJAyopbPqeOdVFsgTqUYAVQ+gyKKodrmf2O+nI89UCaUZJYKORci1KRPCQYeQpRMUYUj2misrHbBMdMMVoUilZ4otQkmmi9AOVBAMuPK9KVj+qARsA1ckAcsgaJsEJKGte9tG9++DtiV9K5dkC0RWURLKvddPy434vwf970sORZezaUgi0xt1DVNSeaOhl+69Y+b1T7FFaP0n9PpnitCUM23KOx6WdyQN769Il1Ry4E3de2jgWDa29NMxTUlvyxRF6FSUhE+kXhEvofe+J7JN+U74F/sJzXkeSJ6CAAAAAElFTkSuQmCC" alt="Shenwei Wang" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition-delay:500ms"/><noscript><picture><source srcset="/static/2b467d8e9e1c0d3a8662ef8c8a223a18/aff39/avatar.png 1x,
/static/2b467d8e9e1c0d3a8662ef8c8a223a18/e5b88/avatar.png 1.5x,
/static/2b467d8e9e1c0d3a8662ef8c8a223a18/88b72/avatar.png 2x" /><img loading="lazy" width="48" height="48" srcset="/static/2b467d8e9e1c0d3a8662ef8c8a223a18/aff39/avatar.png 1x,
/static/2b467d8e9e1c0d3a8662ef8c8a223a18/e5b88/avatar.png 1.5x,
/static/2b467d8e9e1c0d3a8662ef8c8a223a18/88b72/avatar.png 2x" src="/static/2b467d8e9e1c0d3a8662ef8c8a223a18/aff39/avatar.png" alt="Shenwei Wang" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div><div class="css-0">Personal Blog by <a class="css-19seewt" href="/">Shenwei Wang</a>.<br/>Writing code, raising kid, exploring the world.</div></div><style data-emotion-css="11r1i3o">.css-11r1i3o{-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;list-style:none;padding:0;}</style><style data-emotion-css="15qbtrw">.css-15qbtrw{box-sizing:border-box;margin:0;min-width:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;list-style:none;padding:0;}</style><ul class="css-15qbtrw"><li><a rel="prev" class="css-19seewt" href="/javascript-prototype-based-object-oriented/">← <!-- -->JavaScript 基于原型的面向对象</a></li><li><a rel="next" class="css-19seewt" href="/introduce-clockpicker/">一个模拟时钟的时间选择器 ClockPicker<!-- --> →</a></li></ul></footer></div></div></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script>
  
  function gaOptout(){document.cookie=disableStr+'=true; expires=Thu, 31 Dec 2099 23:59:59 UTC;path=/',window[disableStr]=!0}var gaProperty='UA-158375679-1',disableStr='ga-disable-'+gaProperty;document.cookie.indexOf(disableStr+'=true')>-1&&(window[disableStr]=!0);
  if(!(parseInt(navigator.doNotTrack) === 1 || parseInt(window.doNotTrack) === 1 || parseInt(navigator.msDoNotTrack) === 1 || navigator.doNotTrack === "yes")) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'UA-158375679-1', 'auto', {"siteSpeedSampleRate":33});
      ga('set', 'anonymizeIp', true);
      
      
      
      
      }</script><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/javascript-syntax-trap/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-c92f2bc1a503c2693b02.js"],"app":["/app-bc0fa8565171cdc976ba.js"],"component---node-modules-gatsby-theme-blog-core-src-templates-post-query-js":["/component---node-modules-gatsby-theme-blog-core-src-templates-post-query-js-e132334849c54914e889.js"],"component---node-modules-gatsby-theme-blog-core-src-templates-posts-query-js":["/component---node-modules-gatsby-theme-blog-core-src-templates-posts-query-js-deca618258bfbf2a083d.js"],"component---src-pages-404-js":["/component---src-pages-404-js-923f2d364aee2c4033db.js"]};/*]]>*/</script><script src="/polyfill-c92f2bc1a503c2693b02.js" nomodule=""></script><script src="/component---node-modules-gatsby-theme-blog-core-src-templates-post-query-js-e132334849c54914e889.js" async=""></script><script src="/commons-c09e6334871a95b3802a.js" async=""></script><script src="/app-bc0fa8565171cdc976ba.js" async=""></script><script src="/styles-2d4804b503525347efbe.js" async=""></script><script src="/framework-42897c4e770e3c8b7b7b.js" async=""></script><script src="/webpack-runtime-4d61d6f36b696a0865b2.js" async=""></script></body></html>